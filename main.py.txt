from replit import clear
from art import logo
import random



def generate_card(set):
  cards = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10]
  num = random.randint(0, len(cards) - 1)
  set.append(cards[num])
def ace(cards):
  if 11 in cards and sum(cards) > 21:
    cards.remove(11)
    cards.append(1)
  return sum(cards)


def check(user, dealer,cards):
  ace(cards)
  if sum(user)==21:
     print("You win")
  if sum(user) > 21:
    print("You lose")
  elif sum(dealer) > 21:
    print("You win")
  elif sum(user) > sum(dealer):
    print("You win")
  elif sum(user) == sum(dealer):
    print("Draw")
  elif sum(user) < sum(dealer):
    print("You lose")
  else:
    return


def deal_(user_cards,dealer_cards):
  generate_card(user_cards)
  print(f"Your cards: {user_cards}, current score: {sum(user_cards)}")
  print(f"Computer's first card: {dealer_cards}")


def pass_(user_cards,dealer_cards):
  print(f"Your final hand: {user_cards}, current score: {sum(user_cards)}")
  while sum(dealer_cards) < 21:
    generate_card(dealer_cards)
  print(
      f"Computer's final hand: {dealer_cards}, final score: {sum(dealer_cards)}"
  )


def blackjack():
  print(logo)

  user_cards = []
  dealer_cards = []
  cards = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10]

  generate_card(user_cards)
  generate_card(user_cards)
  generate_card(dealer_cards)
  print(f"Your cards: {user_cards}, current score: {sum(user_cards)}")
  print(f"Computer's first card: {dealer_cards}")

  while (sum(user_cards) <= 21 and sum(dealer_cards) <= 21):
    draw = input("Type 'y' to get another card, type 'n' to pass: ").lower()
    if draw == 'y':
      deal_(user_cards,dealer_cards)
    elif draw == 'n':
      pass_(user_cards,dealer_cards)
  check(user_cards, dealer_cards,cards)


play = True

while play:
  blackjack()
  result = input("Do you want to play a game of Blackjack? Type 'y' or 'n': ")

  if result == 'y':
    clear()
    blackjack()

  elif result == 'n':
    play = False
    print("\n\nGoodbye !  Thank you for playing !")

  else:
    play = False
    print("Invalid input")
